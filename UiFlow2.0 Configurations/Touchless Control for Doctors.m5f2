{"version":"V2.0","versionNumber":"V2.3.4","type":"cores3","components":[{"name":"page0","type":"lvgl_page","layer":0,"screenId":"builtin","screenName":"","id":"tXoUb7gAHVU2V9TN","createTime":1755764825489,"backgroundColor":"#ffffff","isLVGL":true,"isSelected":true},{"name":"label0","type":"lvgl_label","layer":1,"screenId":"builtin","screenName":"","id":"o!+1W&o$CetAP&ZR","createTime":1755765131746,"x":15,"y":105,"color":"#000000","backgroundColor":"#ffffff","bg_opacity":0,"text":"label0","font":"lv.font_montserrat_24","pageId":"tXoUb7gAHVU2V9TN","isLVGL":true,"isSelected":false}],"resources":[{"software":["mqtt","http","tcp"]},{"hardware":["hardware_button","hardware_pin_button","imu","speaker","touch","als","mic","sdcard","i2c"]},{"unit":["unit_gesture"]}],"units":[{"type":"unit_gesture","name":"gesture_0","portList":["A","PAHUB","Custom"],"portType":"A","userPort":[22,21],"id":"jSB`gll^#Kls5mw&","createTime":1757146559896,"bus":"i2c0","pahubPortList":[0,1,2,3,4,5],"pahubPort":0,"initBlockId":"Ip`%o^o9LiTRRSK.b.3:"}],"hats":[],"bases":[],"i2cs":[{"id":"i2c0","portType":"A","userPort":[22,21],"freq":"100000","blockId":"Na{Z{,g`/0S_l.RF7@bn"}],"blockly":"<variables><variable id=\"Rk(mtab~}w;y]NWrx@OS\">gesture_num</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><mutation isBegin=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_begin\" id=\"g*hkp3^IscJVHsHcl6T/\"><next><block type=\"i2c_init\" id=\"Na{Z{,g`/0S_l.RF7@bn\"><field name=\"NAME\">0</field><field name=\"FREQ\">100000</field><value name=\"SCL\"><shadow type=\"math_number\" id=\"e*UFaoh*rFjr;t!:-0}v\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><value name=\"SDA\"><shadow type=\"math_number\" id=\"UU=dI3^(#Eo-QAv)Q17#\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">2</field></shadow></value><next><block type=\"unit_gesture_init\" id=\"Ip`%o^o9LiTRRSK.b.3:\"><field name=\"NAME\">gesture_0</field><next><block type=\"unit_gesture_set_gesture_highrate\" id=\"5UsQ%cm8#Ts5e:X$T4)~\"><field name=\"NAME\">gesture_0</field><field name=\"OPTION\">True</field><next><block type=\"lvgl_page_screen_load\" id=\")NUKRCt=IDfTEri$tkM-\"><field name=\"NAME\">page0</field><next><block type=\"lvgl_page_set_bg_color\" id=\"$@nGo8|R]:HEjm@o3ZlI\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"u,[FPdtVyBhTLl_hh$kv\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#cccccc</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"Rm?k;1DO|s,#:Z[bB;x8\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"basic_on_loop\" id=\"loop_block\" deletable=\"false\" x=\"50\" y=\"330\"><mutation isUpdate=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_update\" id=\"I$lf0MC.hgB6U[MV[,Q8\"><next><block type=\"variables_set\" id=\"$CiM}x#N.EbR{A@}C{5r\"><field name=\"VAR\" id=\"Rk(mtab~}w;y]NWrx@OS\">gesture_num</field><value name=\"VALUE\"><block type=\"unit_gesture_get_hand_gestures\" id=\"bU09u)cE0Kh{}FUAd@dz\"><field name=\"NAME\">gesture_0</field></block></value><next><block type=\"logic_switch\" id=\"%ly*=n={RJeTAh+JCut[\"><mutation items=\"5\"></mutation><value name=\"SWITCH\"><block type=\"variables_get\" id=\"2QRqNma$AL1{@pmT!*3S\"><field name=\"VAR\" id=\"Rk(mtab~}w;y]NWrx@OS\">gesture_num</field></block></value><value name=\"CASE0\"><block type=\"math_number\" id=\";jy,4eZNe=/5G(syu`Op\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></block></value><statement name=\"DO0\"><block type=\"lvgl_label_set_text\" id=\"ZEL5#u?qf64#I1Es7oln\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"48_e|}L_N[us6T15K$B]\"><field name=\"TEXT\">Prossima Immagine</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"vCV|52MMo+tS5GeE8TNp\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"Fk~(Rs8%;OMI;#z5KHC!\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#ff6666</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"Pl1~U+iC.@4Vm(.W#`QF\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\"fci~(~iijxQ=/DXe:RLB\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"3XUI(,k@YFWL|z0NL-s$\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"NtBfS%d{`-Np`@08@4A0\"><mutation name=\"next_image\"></mutation></block></next></block></next></block></next></block></statement><value name=\"CASE1\"><block type=\"math_number\" id=\"3@[C:$3J=.FSojH4a0tZ\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">2</field></block></value><statement name=\"DO1\"><block type=\"lvgl_label_set_text\" id=\"}yiWRON^a~J^aOd2fvf:\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"$:)j!|6wJnh$0s-5:z9l\"><field name=\"TEXT\">Immagine Precedente</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"aNy,YAcZEmfeaopkQMC_\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"Aia4X!v6?.TpD!yx`Q7*\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#ff6666</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"pc($aR4YF49t+)+OWh[q\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\"KkWaVbeqx+59QBd/{Y]*\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"PLN8)FYl!51@Oj~.y2$R\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"RmnLxV3VsIbd_uE}z/ZQ\"><mutation name=\"prev_image\"></mutation></block></next></block></next></block></next></block></statement><value name=\"CASE2\"><block type=\"math_number\" id=\"i?}Iwjqh;_$lkcg(KF]4\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">4</field></block></value><statement name=\"DO2\"><block type=\"lvgl_label_set_text\" id=\"G_yL@s`e4UHM*!20mADd\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"j]$B_0o:Vj|]z{bYhd#T\"><field name=\"TEXT\">Zoom +</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"GpXLE9[Xk7kTw8g|H-T@\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"q9mBcdM*u!DZo@t@32T6\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#66ff99</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"r|bw6e3UL$V#G)itjO?5\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\"f$-%74v6w}2GQ.lcowuW\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"km,!/fb9rBTALq~m_6d8\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"-]1[zUVt2`S4cj-)L[@q\"><mutation name=\"zoom_in\"></mutation></block></next></block></next></block></next></block></statement><value name=\"CASE3\"><block type=\"math_number\" id=\"nsGl8[^%TIJ2M-8Pa7L`\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">8</field></block></value><statement name=\"DO3\"><block type=\"lvgl_label_set_text\" id=\"Y+)g__-$0l?q:-BKaKZm\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"s[l{tG:h{l^1=8L*5pIa\"><field name=\"TEXT\">Zoom -</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"aJ|,:COEB6g0v_=Dpmh#\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"1dqo#cQSXLW*|yEFCKfz\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#66ff99</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"8g39BOyn0L]INIZx@`Sb\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\")~]M+74jG)M-bb#XsD.?\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"7wMU!!V,RY6#a!.Ki^P5\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"q`,yIZRct3-Obx?Ah:E0\"><mutation name=\"zoom_out\"></mutation></block></next></block></next></block></next></block></statement><value name=\"CASE4\"><block type=\"math_number\" id=\"N[04+jXE8#BGC(]O_C4)\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">16</field></block></value><statement name=\"DO4\"><block type=\"lvgl_label_set_text\" id=\"#8jQ}CIyv2]`+CrUEy1T\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"J1BJS94JN1vbU]HPA0I9\"><field name=\"TEXT\">Ruota Dx</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"mTk_6gbY2}?KL0PyDBTZ\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"hughyvXUn63:kWVr^$v1\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#9999ff</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"rL76hs=_xReUkYA?p%RB\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\"H2J;E}76n`os*t!2eAc=\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"sHrx[XAd;I(_A}f-Lnkk\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"N[G~osiHoy{)ko0+;?Lf\"><mutation name=\"rotate_right\"></mutation></block></next></block></next></block></next></block></statement><value name=\"CASE5\"><block type=\"math_number\" id=\"=#:y(z^|j,Oj8$VLM6|n\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">32</field></block></value><statement name=\"DO5\"><block type=\"lvgl_label_set_text\" id=\"5E?8#18fVZoT[-{c#!mY\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"U{Lyvz4$8Z+[K2HU?S1D\"><field name=\"TEXT\">Ruota Sx</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"a9F[:bw3i0Ol$(dWyhJ*\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"#}8{GNh.Rw}!X4U^#9M(\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#9999ff</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"fV-VX*69nN]#T:2Zcb%e\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value><next><block type=\"time_sleep_second\" id=\"n$:KJP67OS(^~6:k[$64\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"^x,33}C]f!%fd@yHk)mb\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"-x?tTIf^FdV;X.-,.t{.\"><mutation name=\"rotate_left\"></mutation></block></next></block></next></block></next></block></statement><statement name=\"DEFAULT\"><block type=\"lvgl_label_set_text\" id=\"hkQpG?HjZ_+kd1LvH]M6\"><field name=\"NAME\">label0</field><value name=\"VALUE\"><shadow type=\"text\" id=\"~f82EuRUO{,52Sq1*n{9\"><field name=\"TEXT\">In attesa di gesto...</field></shadow></value><next><block type=\"lvgl_page_set_bg_color\" id=\"ln0{#KWWd*G`1]Vbp#p+\"><field name=\"NAME\">page0</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\":@`hQFmOw5]Jl}eGINI;\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#cccccc</field></block></value><value name=\"OPA\"><shadow type=\"math_slider\" id=\"DH}6H*0t*l2]JWoreX*W\"><mutation max=\"255\" min=\"0\" step=\"10\" precision=\"1\"></mutation><field name=\"NUM\">255</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"x:VraQ^$0C[iKqb;Da$I\" x=\"890\" y=\"370\"><field name=\"NAME\">next_image</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"http_request\" id=\"ieHsMVU)F##@By,n(MCd\"><mutation contentType=\"json\"></mutation><field name=\"METHOD\">GET</field><field name=\"TYPE\">json</field><value name=\"URL\"><shadow type=\"text\" id=\"G8tE|u9|g3=oz=e?DboN\"><field name=\"TEXT\">http://172.20.10.14:5050/command</field></shadow></value><value name=\"CONTENT_TYPE\"><shadow type=\"text\" id=\"{=2vH*79:KObzqd)Uj-P\"><field name=\"TEXT\">application/json</field></shadow></value><value name=\"HEADERS\"><block type=\"map_on_loop\" id=\"OB^wMP-/C*Q:NB,UJ)UU\"></block></value><value name=\"DATA\"><block type=\"map_on_loop\" id=\"C*B6!L](cnOjmHv;JI.0\"></block></value></block></statement></block><block type=\"procedures_defnoreturn\" id=\"{kH$b~ua@a)zD8KWF[-h\" x=\"670\" y=\"530\"><field name=\"NAME\">prev_image</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment></block><block type=\"procedures_defnoreturn\" id=\"yyCIU7(^~ygBYsL,a[na\" x=\"670\" y=\"610\"><field name=\"NAME\">zoom_in</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment></block><block type=\"procedures_defnoreturn\" id=\"5wKjPZL7[a+3oQ^IPj5i\" x=\"670\" y=\"690\"><field name=\"NAME\">zoom_out</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment></block><block type=\"procedures_defnoreturn\" id=\"o(lfZ$nVo9-^dZu5)5xh\" x=\"670\" y=\"770\"><field name=\"NAME\">rotate_right</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment></block><block type=\"procedures_defnoreturn\" id=\"ku`;r|NQY9UdTAp+l!A%\" x=\"670\" y=\"850\"><field name=\"NAME\">rotate_left</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment></block>","screen":[{"simulationName":"Built-in","type":"builtin","width":320,"height":240,"scale":0.77,"screenName":"","blockId":"","screenColorType":0,"rotation":1,"id":"builtin","createTime":1755764825488}],"logicWhenNum":0,"pythonCode":"import os, sys, io\nimport M5\nfrom M5 import *\nimport m5ui\nimport lvgl as lv\nimport requests2\nfrom hardware import I2C\nfrom hardware import Pin\nfrom unit import GestureUnit\nimport time\n\npage0 = None\nlabel0 = None\nhttp_req = None\ni2c0 = None\ngesture_0 = None\n\ngesture_num = None\n\ndef next_image():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'next_image'})\n\ndef prev_image():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'prev_image'})\n\ndef zoom_in():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'zoom_in'})\n\ndef zoom_out():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'zoom_out'})\n\ndef rotate_right():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'rotate_right'})\n\ndef rotate_left():\n  global gesture_num, page0, label0, http_req, i2c0, gesture_0\n  http_req = requests2.post('http://172.20.10.14:5050/command', json={'action': 'rotate_left'})\n\ndef setup():\n  global page0, label0, http_req, i2c0, gesture_0, gesture_num\n\n  M5.begin()\n  Widgets.setRotation(1)\n  m5ui.init()\n  page0 = m5ui.M5Page(bg_c=0xffffff)\n  label0 = m5ui.M5Label(\"label0\", x=15, y=105, text_c=0x000000, bg_c=0xffffff, bg_opa=0, font=lv.font_montserrat_24, parent=page0)\n\n  i2c0 = I2C(0, scl=Pin(1), sda=Pin(2), freq=100000)\n  gesture_0 = GestureUnit(i2c0)\n  gesture_0.set_gesture_highrate(True)\n  page0.screen_load()\n  page0.set_bg_color(0xcccccc, 255, 0)\n\ndef loop():\n  global page0, label0, http_req, i2c0, gesture_0, gesture_num\n  M5.update()\n  gesture_num = gesture_0.get_hand_gestures()\n  if gesture_num==1:\n    label0.set_text(str('Prossima Immagine'))\n    page0.set_bg_color(0xff6666, 255, 0)\n    time.sleep(1)\n    next_image()\n  elif gesture_num==2:\n    label0.set_text(str('Immagine Precedente'))\n    page0.set_bg_color(0xff6666, 255, 0)\n    time.sleep(1)\n    prev_image()\n  elif gesture_num==4:\n    label0.set_text(str('Zoom +'))\n    page0.set_bg_color(0x66ff99, 255, 0)\n    time.sleep(1)\n    zoom_in()\n  elif gesture_num==8:\n    label0.set_text(str('Zoom -'))\n    page0.set_bg_color(0x66ff99, 255, 0)\n    time.sleep(1)\n    zoom_out()\n  elif gesture_num==16:\n    label0.set_text(str('Ruota Dx'))\n    page0.set_bg_color(0x9999ff, 255, 0)\n    time.sleep(1)\n    rotate_right()\n  elif gesture_num==32:\n    label0.set_text(str('Ruota Sx'))\n    page0.set_bg_color(0x9999ff, 255, 0)\n    time.sleep(1)\n    rotate_left()\n  else:\n    label0.set_text(str('In attesa di gesto...'))\n    page0.set_bg_color(0xcccccc, 255, 0)\n  time.sleep(0.1)\n\nif __name__ == '__main__':\n  try:\n    setup()\n    while True:\n      loop()\n  except (Exception, KeyboardInterrupt) as e:\n    try:\n      m5ui.deinit()\n      from utility import print_error_msg\n      print_error_msg(e)\n    except ImportError:\n      print(\"please update to latest firmware\")","customList":[]}